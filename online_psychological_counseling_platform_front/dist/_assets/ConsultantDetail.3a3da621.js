let e=document.createElement("style");e.innerHTML=".common-layout[data-v-bd003838]{height:100%;width:100%;background-color:#cce5f3}.header[data-v-bd003838]{font-size:40px;font-family:楷体;margin-left:100px;letter-spacing:20px;margin-top:20px}hr[data-v-bd003838]{border-color:#00f}.mr3[data-v-bd003838]:hover{cursor:pointer}.chat[data-v-bd003838]:hover{cursor:pointer;color:#6a5acd}.fade-enter-active[data-v-bd003838],.fade-leave-active[data-v-bd003838]{transition:opacity .8s}.fade-enter[data-v-bd003838],.fade-leave-to[data-v-bd003838]{opacity:0}.element[data-v-bd003838]{background-color:#add8e6;padding:10px}",document.head.appendChild(e);import{s as a,r as t,l,f as n,a as o,o as s,c as r,e as i,w as d,v as p,b as u,d as c,t as m,T as f,m as v,x,F as g,n as h,g as y,p as b,h as _,y as w,z as k}from"./index.5272c697.js";const z=e=>(b("data-v-bd003838"),e=e(),_(),e),C={class:"common-layout"},V={class:"flex items-center"},N=z((()=>u("span",{class:"text-large font-600 mr-3"}," 贵大心理 ",-1))),P=z((()=>u("span",{class:"text-sm mr-2",style:{color:"var(--el-text-color-regular)"}}," 咨询师详情 ",-1))),S={style:{width:"100%",height:"300px"}},T=z((()=>u("div",{style:{"background-color":"lightskyblue",height:"130px",width:"100%"}},null,-1))),U={style:{"margin-left":"270px","margin-top":"-40px","font-family":"楷体","font-size":"30px",color:"white"}},E={style:{"margin-left":"40px"}},I={style:{"margin-left":"40px"}},q={style:{"margin-left":"270px","margin-top":"-100px","font-size":"20px"}},F={style:{"font-size":"30px"}},H={style:{"margin-left":"800px","margin-top":"-30px"}},L=z((()=>u("div",{style:{"margin-left":"860px","margin-top":"-50px","font-size":"30px"}},"私信",-1))),M={class:"dialog-footer"},j={style:{"margin-left":"50px"}},A=z((()=>u("h1",{style:{"font-size":"25px"}},"基本信息",-1))),B=z((()=>u("hr",null,null,-1))),D=z((()=>u("h3",{style:{"font-size":"20px"}},"擅长方向",-1))),R={style:{"letter-spacing":"5px"}},$={style:{"margin-left":"50px"}},G=z((()=>u("h1",{style:{"font-size":"25px"}},"评价反馈",-1))),J=z((()=>u("hr",null,null,-1))),K={style:{"margin-left":"10px","font-size":"20px"}},O={key:0},Q={key:1},W={style:{"text-align":"right","margin-left":"650px","font-size":"20px"}},X={style:{height:"60px","background-color":"#eeeeee","font-size":"20px","border-radius":"5px","margin-top":"7px","align-items":"center",display:"flex"}},Y=z((()=>u("h1",{style:{"font-size":"30px"}},"目前我们提供:",-1))),Z={style:{"margin-top":"60px"}},ee=z((()=>u("div",{style:{"margin-left":"130px","margin-top":"-60px","font-size":"30px"}}," 在线文字咨询 ",-1))),ae={class:"mb-4"};var te={__name:"ConsultantDetail",setup(e){document.title="咨询师详情页";const b=a().params.circleUrl,_=t([]),z=t([]),te=t(!1),le=t(""),ne=t(!1),oe=a().params.username,se=a().params.consultantName;let re=t("");const ie=()=>{y.back()},de=t("");l((()=>{try{const e=n.get("http://localhost:8091/account/isConsultant",{params:{username:username}});de.value=e.data.data}catch(e){console.error("Error fetching isConsultant:",e)}}));async function pe(){try{200===(await n.get("http://localhost:8091/reservation/again",{params:{reservationUser:oe,reservationConsultant:se}})).data.code?alert("您已提交过预约，请等待处理！"):await y.push({name:"reserve",params:{consultantName:se,consultantPfp:re,username:oe}})}catch(e){console.error("Error occurred:",e)}}function ue(){sessionStorage.removeItem("token"),y.push({name:"login"})}function ce(){"no"===de.value?y.push({name:"home"}):y.push({name:"consultantHome"})}return l((()=>{(async()=>{try{const e=await n.get("http://localhost:8091/consultant/detail",{params:{consultantPhone:a().params.consultantPhone}});_.value=e.data.data}catch(e){console.error(e)}})(),(async()=>{try{const e=await n.get("http://localhost:8091/evaluate/consultant",{params:{evaluated:a().params.consultantName}});z.value=e.data.data}catch(e){console.error(e)}})()})),(e,t)=>{const l=o("el-avatar"),y=o("el-dropdown-item"),de=o("el-dropdown-menu"),me=o("el-dropdown"),fe=o("el-tag"),ve=o("el-page-header"),xe=o("el-header"),ge=o("el-icon"),he=o("el-input"),ye=o("el-form-item"),be=o("el-form"),_e=o("el-button"),we=o("el-dialog"),ke=o("el-result"),ze=o("el-aside"),Ce=o("ChatLineSquare"),Ve=o("el-main"),Ne=o("el-container");return s(),r("div",C,[i(Ne,null,{default:d((()=>[i(xe,{style:{height:"60px",width:"100%","background-color":"#cce5F3","z-index":"2",position:"fixed"}},{default:d((()=>[i(ve,{icon:p(w),style:{"margin-top":"15px"},onBack:ie},{content:d((()=>[u("div",V,[i(me,null,{dropdown:d((()=>[i(de,null,{default:d((()=>[i(y,{onClick:ce},{default:d((()=>[c("个人主页")])),_:1}),i(y,{onClick:ue},{default:d((()=>[c("退出登录")])),_:1})])),_:1})])),default:d((()=>[i(l,{size:32,src:p(b),class:"mr3"},null,8,["src"])])),_:1}),N,P,i(fe,null,{default:d((()=>[c("访问用户:"+m(p(a)().params.username),1)])),_:1})])])),_:1},8,["icon"])])),_:1}),i(Ne,null,{default:d((()=>[i(ze,{width:"1000px",style:{"margin-top":"80px"}},{default:d((()=>{return[u("div",S,[T,u("div",U,[c(m(p(a)().params.consultantName)+" ",1),u("span",E,"性别:"+m(_.value.consultantSex),1),u("span",I,"年龄:"+m(_.value.consultantAge),1)]),u("div",null,[i(l,{shape:"square",size:200,src:(e=_.value,re=e.consultantPfp,`${e.consultantPfp}`),style:{"margin-left":"50px","margin-top":"-70px"}},null,8,["src"])]),u("div",q,[c(" 在贵大心理帮助过"),u("span",null,[u("strong",F,m(_.value.consultantNo),1)]),c("人 ")]),u("div",{plain:"",onClick:t[0]||(t[0]=e=>te.value=!0),class:"chat"},[u("div",H,[i(ge,{size:"60",color:"skyblue"},{default:d((()=>[i(p(k))])),_:1})]),L]),i(we,{modelValue:te.value,"onUpdate:modelValue":t[4]||(t[4]=e=>te.value=e),title:"私信",width:"500",style:{"font-family":"楷体"}},{footer:d((()=>[u("div",M,[i(_e,{onClick:t[2]||(t[2]=e=>te.value=!1)},{default:d((()=>[c("取消")])),_:1}),i(_e,{type:"primary",onClick:t[3]||(t[3]=e=>{te.value=!1,(async()=>{if(!le.value)return alert("请输入内容"),void(te.value=!0);try{const e=await n.post("http://localhost:8091/pmessage/send",{pmContent:le.value,pmSender:oe,pmRecipient:se});le.value="",200==e.data.code&&(ne.value=!0,setTimeout((()=>{ne.value=!1}),1e3))}catch(e){console.error(e)}})()})},{default:d((()=>[c(" 发送 ")])),_:1})])])),default:d((()=>[i(be,null,{default:d((()=>[i(ye,{label:"私信内容:","label-width":"140px"},{default:d((()=>[i(he,{modelValue:le.value,"onUpdate:modelValue":t[1]||(t[1]=e=>le.value=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),i(f,{name:"fade"},{default:d((()=>[ne.value?(s(),v(ke,{key:0,icon:"success",title:"发送成功"})):x("",!0)])),_:1})]),u("div",j,[A,B,D,u("h1",R,m(_.value.consultantType),1)]),u("div",$,[G,J,(s(!0),r(g,null,h(z.value,(e=>(s(),r("div",{key:e.evaluateId,style:{"margin-top":"10px"}},[u("span",null,[i(l,{size:32,src:p(b),class:"mr3"},null,8,["src"])]),u("span",K,["yes"===e.evaluateShow?(s(),r("strong",O,"匿名")):(s(),r("strong",Q,m(e.evaluate),1))]),u("span",W,m(e.evaluateTime),1),u("div",X,m(e.evaluateMessage),1)])))),128))])];var e})),_:1}),i(Ve,{style:{"margin-left":"1030px","margin-top":"80px",position:"fixed",height:"500px",width:"400px",border:"#eeeeee","box-shadow":"0 0 3px rgba(0, 0, 0, 0.3)"}},{default:d((()=>[Y,u("div",Z,[i(ge,{color:"skyblue",size:"70px",style:{"margin-left":"60px"}},{default:d((()=>[i(Ce)])),_:1})]),ee,u("div",ae,[i(_e,{onClick:pe,type:"primary",round:"",style:{height:"50px",width:"300px","margin-top":"100px","margin-left":"32px"}},{default:d((()=>[c(" 立即预约 ")])),_:1})])])),_:1})])),_:1})])),_:1})])}},__scopeId:"data-v-bd003838"};export{te as default};
