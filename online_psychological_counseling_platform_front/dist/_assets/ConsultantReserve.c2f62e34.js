let e=document.createElement("style");e.innerHTML=".container[data-v-4099df6c]{font-family:楷体;background-color:#f5f5f5;z-index:1;font-size:16px}.dialogContainer[data-v-4099df6c]{padding:20px;height:100%;text-align:center;font-family:华文楷体;font-size:30px}",document.head.appendChild(e);import{s as a,r as t,l as s,k as r,a as o,o as n,m as l,w as i,e as c,d,x as u,f as p,g as m,E as v}from"./index.5272c697.js";var h={__name:"ConsultantReserve",setup(e){document.title="预约消息";const h=a().params.username,f=t(""),g=t("");t("");const y=t(""),x=t(""),w=t([]),k=async()=>{try{const e=await p.get("http://localhost:8091/reservation/cRecord",{params:{username:h,search:x.value}});w.value=e.data.data}catch(e){console.error(e)}};return s((()=>{k(),(async()=>{try{const e=await p.get("http://localhost:8091/account/isConsultant",{params:{username:h}});200===e.data.code&&(y.value=e.data.data)}catch(e){console.error(e)}})()})),r(x,(()=>{k()})),(e,a)=>{const t=o("el-table-column"),s=o("el-button"),r=o("el-button-group"),k=o("el-input"),C=o("el-table");return n(),l(C,{size:"large",data:w.value,"max-height":"600px",class:"container","empty-text":"暂没有对你的预约",stripe:"",style:{width:"100%",height:"auto"}},{default:i((()=>[c(t,{fixed:"",prop:"reservationUser",label:"预约人",width:"150"}),c(t,{prop:"reservationTime",label:"预约的时间",sortable:"",width:"200"}),c(t,{prop:"reservationMessage",label:"相关备注",width:"280"}),c(t,{prop:"reservationNow",label:"提交时间",sortable:"",width:"190"}),c(t,{prop:"reservationStatus",label:"状态",width:"150"}),c(t,{fixed:"right",label:"Operations",width:"250"},{default:i((e=>[c(r,null,{default:i((()=>["处理中"===e.row.reservationStatus?(n(),l(s,{key:0,link:"",style:{"font-size":"20px"},size:"large",type:"primary",onClick:a=>(async(e,a)=>{try{const e=a.reservationUser;200===(await p.post("http://localhost:8091/reservation/agreeRes",{reservationUser:e,username:h})).data.code?(v({type:"success",message:"操作成功"}),location.reload()):v({type:"error",message:"操作失败"})}catch(e){v({type:"error",message:"操作失败"})}})(e.$index,e.row)},{default:i((()=>[d(" 同意 ")])),_:2},1032,["onClick"])):u("",!0),"处理中"===e.row.reservationStatus?(n(),l(s,{key:1,link:"",style:{"margin-left":"20px","font-size":"17px"},size:"large",type:"danger",onClick:a=>(async(e,a)=>{try{const e=a.reservationUser;200===(await p.post("http://localhost:8091/reservation/refuseRes",{reservationUser:e,username:h})).data.code?(v({type:"success",message:"操作成功"}),location.reload()):v({type:"error",message:"操作失败"})}catch(e){v({type:"error",message:"操作失败"})}})(e.$index,e.row)},{default:i((()=>[d(" 拒绝 ")])),_:2},1032,["onClick"])):u("",!0),"预约成功"===e.row.reservationStatus?(n(),l(s,{key:2,link:"",style:{"margin-left":"60px","font-size":"17px"},size:"large",type:"success",onClick:a=>((e,a)=>{const t={username:a.reservationConsultant};f.value=a.reservationUser,g.value=a.reservationConsultant,m.push({name:"chat",params:{isConsultant:y.value,reservationUser:f.value,reservationConsultant:g.value}});const s=JSON.stringify(t);sessionStorage.setItem("user",s)})(e.$index,e.row)},{default:i((()=>[d(" 沟通 ")])),_:2},1032,["onClick"])):u("",!0)])),_:2},1024)])),header:i((()=>[c(k,{modelValue:x.value,"onUpdate:modelValue":a[0]||(a[0]=e=>x.value=e),size:"large",placeholder:"输入咨询者姓名查询"},null,8,["modelValue"])])),_:1})])),_:1},8,["data"])}},__scopeId:"data-v-4099df6c"};export{h as default};
